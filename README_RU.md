# Приложение по добавлению текстового описания к изображению

Цель программы - добавление текстового описания под изображением

[Problem definition](Problem_definitions.pdf)

---


Спецификацию эндпоинтов, после запуска приложения, можно посмотреть по адресу http://127.0.0.1:8000/docs

Пример команды для отправки файла и описания: 

```sh
curl -X POST "http://localhost:8000/api/images" -H "accept: application/json" -H "Content-Type: multipart/form-data" -F "file=@~/Documents/your_file.jpeg" -F "description=Не следует, однако, забывать, что новая модель организационной деятельности является качественно новой ступенью форм воздействия. Лишь интерактивные прототипы лишь добавляют фракционных разноглай"
```



Получение списка хранимых обьектов (выполнить команду или открыть в браузере url)
```sh
curl http://127.0.0.1:8000/api/images
```
Пример входного изображения:

<img src="input_example.png" alt="Пример входного изображения" width="300" />

Пример результирующего изображения:

<img src="output_example.jpeg" alt="Пример выходного изображения" width="600" />




## Запуск приложение

Этот документ описывает шаги по установке и запуску сервиса с использованием Docker Compose.

### Шаг 1: Установка Docker и Docker Compose

Для начала, вам необходимо установить Docker и Docker Compose на вашу систему.

#### Установка Docker и Docker-compose

1. Перейдите на [страницу загрузки Docker](https://docs.docker.com/get-docker/) и следуйте инструкциям для вашей операционной системы.
2. Перейдите на [страницу загрузки Docker-compose](https://docs.docker.com/compose/install/) и следуйте инструкциям для вашей операционной системы.


### Шаг 2: Конфигурирование приложения

Для настройки некоторых параметров приложения, в корне репозитория есть config.toml файл. В нем можно определить параметры подключения для базы данных, сервиса redis и базовых настроек текст, который будет вставляться под изображение. 

Данный файл копируется в каждый их запускаемых микросервисов

Примечание: если необходимо использовать пользовательский шрифт, необходимо поместить файл формата .ttf в папку image_processing_service и название файла (без расширения) указать в параметре font


### Шаг 3: Запуск

Выполнить команду из корневой папки репозитория

```sh
docker-compose up
```

Если указать параметр `-d`, приложение будет запущено в фоне

### Шаг 3: Остановка

Выполнить команду 

```sh
docker-compose down
```


---
---
## Допущение к выполнению тестового задания

#### 1) Хранение обработанных изображений в бинарном формате в БД 
Хотя это является нерациональным использованием ресурсов SSD, для упрощения и MVP был выбран именно такой способ

#### 2) Отсутсвие тестов
Тесты не были реализованы в связи с ограниченным временем на разработку

#### 3) Формальное логирование и обработка исключений
Логирование нуждается в переработке. Требуется написание кастомных исключений для сервисов обработки и сохранения изображения. 

#### 4) Кофигурация сервисов
Сервисы конфигурируются только в момент запуска. Единый файл и код конфигурации для всего приложения. Конфигурация БД в самом docker-compose файле.

#### 5) Асинхронность
Не был использован асинхронный подход в написании кода для сервиса обработки и сохранения изображение


